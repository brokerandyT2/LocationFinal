apiVersion: v1
kind: Service
metadata:
  name: mssql-service
  namespace: location-dev
  labels:
    app: mssql
    component: database
    environment: development
    service-type: database
  annotations:
    description: "SQL Server service for external access from development tools"
    created-by: "setup-dev.sh"
    service.beta.kubernetes.io/external-traffic: "OnlyLocal"
spec:
  type: NodePort
  selector:
    app: mssql
    component: database
  ports:
  - name: mssql
    protocol: TCP
    port: 1433
    targetPort: 1433
    # nodePort will be auto-assigned by Kubernetes (30000-32767 range)
  sessionAffinity: None
  externalTrafficPolicy: Local

# SECURITY NOTE: This file should be READ-ONLY in Git except for ADO administrators  
# Azure DevOps permissions: Only ADO admins should have write access to k8s/ directory